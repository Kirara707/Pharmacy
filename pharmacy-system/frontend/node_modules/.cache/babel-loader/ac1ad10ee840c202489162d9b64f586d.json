{"remainingRequest":"C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\src\\views\\Users.vue?vue&type=template&id=68be103e&scoped=true","dependencies":[{"path":"C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\src\\views\\Users.vue","mtime":1750135743410},{"path":"C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1750139103810},{"path":"C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1750139103814},{"path":"C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1750139102462},{"path":"C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1750139103810},{"path":"C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1750139102365}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgcmVzb2x2ZURpcmVjdGl2ZSBhcyBfcmVzb2x2ZURpcmVjdGl2ZSwgd2l0aERpcmVjdGl2ZXMgYXMgX3dpdGhEaXJlY3RpdmVzLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrIH0gZnJvbSAidnVlIjsKY29uc3QgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogInVzZXJzLWNvbnRhaW5lciIKfTsKY29uc3QgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogImhlYWRlciIKfTsKY29uc3QgX2hvaXN0ZWRfMyA9IHsKICBjbGFzczogImRpYWxvZy1mb290ZXIiCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgY29uc3QgX2NvbXBvbmVudF9lbF9idXR0b24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtYnV0dG9uIik7CiAgY29uc3QgX2NvbXBvbmVudF9lbF90YWJsZV9jb2x1bW4gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtdGFibGUtY29sdW1uIik7CiAgY29uc3QgX2NvbXBvbmVudF9lbF90YWcgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtdGFnIik7CiAgY29uc3QgX2NvbXBvbmVudF9lbF90YWJsZSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC10YWJsZSIpOwogIGNvbnN0IF9jb21wb25lbnRfZWxfaW5wdXQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtaW5wdXQiKTsKICBjb25zdCBfY29tcG9uZW50X2VsX2Zvcm1faXRlbSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1mb3JtLWl0ZW0iKTsKICBjb25zdCBfY29tcG9uZW50X2VsX29wdGlvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1vcHRpb24iKTsKICBjb25zdCBfY29tcG9uZW50X2VsX3NlbGVjdCA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1zZWxlY3QiKTsKICBjb25zdCBfY29tcG9uZW50X2VsX2Zvcm0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZm9ybSIpOwogIGNvbnN0IF9jb21wb25lbnRfZWxfZGlhbG9nID0gX3Jlc29sdmVDb21wb25lbnQoImVsLWRpYWxvZyIpOwogIGNvbnN0IF9kaXJlY3RpdmVfbG9hZGluZyA9IF9yZXNvbHZlRGlyZWN0aXZlKCJsb2FkaW5nIik7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY2FjaGVbNl0gfHwgKF9jYWNoZVs2XSA9IF9jcmVhdGVFbGVtZW50Vk5vZGUoImgyIiwgbnVsbCwgIueUqOaIt+euoeeQhiIsIC0xIC8qIEhPSVNURUQgKi8pKSwgJHNldHVwLmNhbkFkZFVzZXIgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgIGtleTogMCwKICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgIG9uQ2xpY2s6ICRzZXR1cC5zaG93QWRkRGlhbG9nCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzVdIHx8IChfY2FjaGVbNV0gPSBbX2NyZWF0ZVRleHRWTm9kZSgiIOa3u+WKoOeUqOaItyAiKV0pKSwKICAgIF86IDEgLyogU1RBQkxFICovLAogICAgX186IFs1XQogIH0sIDggLyogUFJPUFMgKi8sIFsib25DbGljayJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSldKSwgX3dpdGhEaXJlY3RpdmVzKChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX3RhYmxlLCB7CiAgICBkYXRhOiAkc2V0dXAudXNlcnMsCiAgICBzdHlsZTogewogICAgICAid2lkdGgiOiAiMTAwJSIKICAgIH0KICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdGFibGVfY29sdW1uLCB7CiAgICAgIHByb3A6ICJpZCIsCiAgICAgIGxhYmVsOiAiSUQiLAogICAgICB3aWR0aDogIjgwIgogICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX3RhYmxlX2NvbHVtbiwgewogICAgICBwcm9wOiAidXNlcm5hbWUiLAogICAgICBsYWJlbDogIueUqOaIt+WQjSIKICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF90YWJsZV9jb2x1bW4sIHsKICAgICAgcHJvcDogInJvbGUiLAogICAgICBsYWJlbDogIuinkuiJsiIKICAgIH0sIHsKICAgICAgZGVmYXVsdDogX3dpdGhDdHgoc2NvcGUgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX3RhZywgewogICAgICAgIHR5cGU6ICRzZXR1cC5nZXRSb2xlVHlwZShzY29wZS5yb3cucm9sZSkKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcoJHNldHVwLmdldFJvbGVOYW1lKHNjb3BlLnJvdy5yb2xlKSksIDEgLyogVEVYVCAqLyldKSwKICAgICAgICBfOiAyIC8qIERZTkFNSUMgKi8KICAgICAgfSwgMTAzMiAvKiBQUk9QUywgRFlOQU1JQ19TTE9UUyAqLywgWyJ0eXBlIl0pXSksCiAgICAgIF86IDEgLyogU1RBQkxFICovCiAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdGFibGVfY29sdW1uLCB7CiAgICAgIHByb3A6ICJjcmVhdGVkX2F0IiwKICAgICAgbGFiZWw6ICLliJvlu7rml7bpl7QiCiAgICB9LCB7CiAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KHNjb3BlID0+IFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcobmV3IERhdGUoc2NvcGUucm93LmNyZWF0ZWRfYXQpLnRvTG9jYWxlU3RyaW5nKCkpLCAxIC8qIFRFWFQgKi8pXSksCiAgICAgIF86IDEgLyogU1RBQkxFICovCiAgICB9KSwgJHNldHVwLmNhbkVkaXRVc2VyID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfdGFibGVfY29sdW1uLCB7CiAgICAgIGtleTogMCwKICAgICAgbGFiZWw6ICLmk43kvZwiCiAgICB9LCB7CiAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KHNjb3BlID0+IFskc2V0dXAuY2FuRGVsZXRlVXNlcihzY29wZS5yb3cpID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAga2V5OiAwLAogICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgdHlwZTogImRhbmdlciIsCiAgICAgICAgb25DbGljazogJGV2ZW50ID0+ICRzZXR1cC5oYW5kbGVEZWxldGUoc2NvcGUucm93KQogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzddIHx8IChfY2FjaGVbN10gPSBbX2NyZWF0ZVRleHRWTm9kZSgiIOWIoOmZpCAiKV0pKSwKICAgICAgICBfOiAyIC8qIERZTkFNSUMgKi8sCiAgICAgICAgX186IFs3XQogICAgICB9LCAxMDMyIC8qIFBST1BTLCBEWU5BTUlDX1NMT1RTICovLCBbIm9uQ2xpY2siXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpXSksCiAgICAgIF86IDEgLyogU1RBQkxFICovCiAgICB9KSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSldKSwKICAgIF86IDEgLyogU1RBQkxFICovCiAgfSwgOCAvKiBQUk9QUyAqLywgWyJkYXRhIl0pKSwgW1tfZGlyZWN0aXZlX2xvYWRpbmcsICRzZXR1cC5sb2FkaW5nXV0pLCBfY3JlYXRlQ29tbWVudFZOb2RlKCIg5re75Yqg55So5oi35a+56K+d5qGGICIpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9kaWFsb2csIHsKICAgIHRpdGxlOiAi5re75Yqg55So5oi3IiwKICAgIG1vZGVsVmFsdWU6ICRzZXR1cC5kaWFsb2dWaXNpYmxlLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9ICRldmVudCA9PiAkc2V0dXAuZGlhbG9nVmlzaWJsZSA9ICRldmVudCksCiAgICB3aWR0aDogIjUwMHB4IgogIH0sIHsKICAgIGZvb3RlcjogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBfaG9pc3RlZF8zLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgIG9uQ2xpY2s6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gJGV2ZW50ID0+ICRzZXR1cC5kaWFsb2dWaXNpYmxlID0gZmFsc2UpCiAgICB9LCB7CiAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVs4XSB8fCAoX2NhY2hlWzhdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuWPlua2iCIpXSkpLAogICAgICBfOiAxIC8qIFNUQUJMRSAqLywKICAgICAgX186IFs4XQogICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgIG9uQ2xpY2s6ICRzZXR1cC5oYW5kbGVTdWJtaXQKICAgIH0sIHsKICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzldIHx8IChfY2FjaGVbOV0gPSBbX2NyZWF0ZVRleHRWTm9kZSgiIOehruWumiAiKV0pKSwKICAgICAgXzogMSAvKiBTVEFCTEUgKi8sCiAgICAgIF9fOiBbOV0KICAgIH0sIDggLyogUFJPUFMgKi8sIFsib25DbGljayJdKV0pXSksCiAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybSwgewogICAgICBtb2RlbDogJHNldHVwLnVzZXJGb3JtLAogICAgICBydWxlczogJHNldHVwLnJ1bGVzLAogICAgICByZWY6ICJ1c2VyRm9ybSIsCiAgICAgICJsYWJlbC13aWR0aCI6ICIxMDBweCIKICAgIH0sIHsKICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgIGxhYmVsOiAi55So5oi35ZCNIiwKICAgICAgICBwcm9wOiAidXNlcm5hbWUiCiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgIG1vZGVsVmFsdWU6ICRzZXR1cC51c2VyRm9ybS51c2VybmFtZSwKICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSAkZXZlbnQgPT4gJHNldHVwLnVzZXJGb3JtLnVzZXJuYW1lID0gJGV2ZW50KQogICAgICAgIH0sIG51bGwsIDggLyogUFJPUFMgKi8sIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgIF86IDEgLyogU1RBQkxFICovCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICBsYWJlbDogIuWvhueggSIsCiAgICAgICAgcHJvcDogInBhc3N3b3JkIgogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgICB0eXBlOiAicGFzc3dvcmQiLAogICAgICAgICAgbW9kZWxWYWx1ZTogJHNldHVwLnVzZXJGb3JtLnBhc3N3b3JkLAogICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9ICRldmVudCA9PiAkc2V0dXAudXNlckZvcm0ucGFzc3dvcmQgPSAkZXZlbnQpCiAgICAgICAgfSwgbnVsbCwgOCAvKiBQUk9QUyAqLywgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgXzogMSAvKiBTVEFCTEUgKi8KICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgIGxhYmVsOiAi6KeS6ImyIiwKICAgICAgICBwcm9wOiAicm9sZSIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9zZWxlY3QsIHsKICAgICAgICAgIG1vZGVsVmFsdWU6ICRzZXR1cC51c2VyRm9ybS5yb2xlLAogICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9ICRldmVudCA9PiAkc2V0dXAudXNlckZvcm0ucm9sZSA9ICRldmVudCksCiAgICAgICAgICBwbGFjZWhvbGRlcjogIuivt+mAieaLqeinkuiJsiIKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkc2V0dXAuYXZhaWxhYmxlUm9sZXMsIHJvbGUgPT4gewogICAgICAgICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgICAgICBrZXk6IHJvbGUudmFsdWUsCiAgICAgICAgICAgICAgbGFiZWw6IHJvbGUubGFiZWwsCiAgICAgICAgICAgICAgdmFsdWU6IHJvbGUudmFsdWUKICAgICAgICAgICAgfSwgbnVsbCwgOCAvKiBQUk9QUyAqLywgWyJsYWJlbCIsICJ2YWx1ZSJdKTsKICAgICAgICAgIH0pLCAxMjggLyogS0VZRURfRlJBR01FTlQgKi8pKV0pLAogICAgICAgICAgXzogMSAvKiBTVEFCTEUgKi8KICAgICAgICB9LCA4IC8qIFBST1BTICovLCBbIm1vZGVsVmFsdWUiXSldKSwKICAgICAgICBfOiAxIC8qIFNUQUJMRSAqLwogICAgICB9KV0pLAogICAgICBfOiAxIC8qIFNUQUJMRSAqLwogICAgfSwgOCAvKiBQUk9QUyAqLywgWyJtb2RlbCIsICJydWxlcyJdKV0pLAogICAgXzogMSAvKiBTVEFCTEUgKi8KICB9LCA4IC8qIFBST1BTICovLCBbIm1vZGVsVmFsdWUiXSldKTsKfQ=="},{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$setup","canAddUser","_createBlock","_component_el_button","type","onClick","showAddDialog","_cache","_component_el_table","data","users","style","_createVNode","_component_el_table_column","prop","label","width","default","_withCtx","scope","_component_el_tag","getRoleType","row","role","getRoleName","Date","created_at","toLocaleString","canEditUser","canDeleteUser","size","$event","handleDelete","loading","_createCommentVNode","_component_el_dialog","title","dialogVisible","footer","_hoisted_3","handleSubmit","_component_el_form","model","userForm","rules","ref","_component_el_form_item","_component_el_input","username","password","_component_el_select","placeholder","_Fragment","_renderList","availableRoles","_component_el_option","key","value"],"sources":["C:\\Users\\lizhe\\Desktop\\database\\pharmacy-system\\frontend\\src\\views\\Users.vue"],"sourcesContent":["<template>\r\n  <div class=\"users-container\">\r\n    <div class=\"header\">\r\n      <h2>用户管理</h2>\r\n      <el-button type=\"primary\" @click=\"showAddDialog\" v-if=\"canAddUser\">\r\n        添加用户\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"users\"\r\n      style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\r\n      <el-table-column prop=\"username\" label=\"用户名\" />\r\n      <el-table-column prop=\"role\" label=\"角色\">\r\n        <template #default=\"scope\">\r\n          <el-tag :type=\"getRoleType(scope.row.role)\">\r\n            {{ getRoleName(scope.row.role) }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"created_at\" label=\"创建时间\">\r\n        <template #default=\"scope\">\r\n          {{ new Date(scope.row.created_at).toLocaleString() }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" v-if=\"canEditUser\">\r\n        <template #default=\"scope\">\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.row)\"\r\n            v-if=\"canDeleteUser(scope.row)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 添加用户对话框 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      v-model=\"dialogVisible\"\r\n      width=\"500px\">\r\n      <el-form\r\n        :model=\"userForm\"\r\n        :rules=\"rules\"\r\n        ref=\"userForm\"\r\n        label-width=\"100px\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"userForm.username\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"userForm.password\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色\" prop=\"role\">\r\n          <el-select v-model=\"userForm.role\" placeholder=\"请选择角色\">\r\n            <el-option\r\n              v-for=\"role in availableRoles\"\r\n              :key=\"role.value\"\r\n              :label=\"role.label\"\r\n              :value=\"role.value\" />\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSubmit\">\r\n            确定\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'Users',\r\n  setup() {\r\n    const store = useStore()\r\n    const loading = ref(false)\r\n    const dialogVisible = ref(false)\r\n    const userForm = ref({\r\n      username: '',\r\n      password: '',\r\n      role: ''\r\n    })\r\n\r\n    const rules = {\r\n      username: [\r\n        { required: true, message: '请输入用户名', trigger: 'blur' }\r\n      ],\r\n      password: [\r\n        { required: true, message: '请输入密码', trigger: 'blur' }\r\n      ],\r\n      role: [\r\n        { required: true, message: '请选择角色', trigger: 'change' }\r\n      ]\r\n    }\r\n\r\n    const users = computed(() => store.state.users.list)\r\n    const userRole = computed(() => store.state.auth.user?.role)\r\n\r\n    const canAddUser = computed(() => {\r\n      return ['admin', 'pharmacy_admin'].includes(userRole.value)\r\n    })\r\n\r\n    const canEditUser = computed(() => {\r\n      return ['admin', 'pharmacy_admin'].includes(userRole.value)\r\n    })\r\n\r\n    const availableRoles = computed(() => {\r\n      if (userRole.value === 'admin') {\r\n        return [\r\n          { value: 'admin', label: '系统管理员' },\r\n          { value: 'pharmacy_admin', label: '药店管理员' },\r\n          { value: 'salesperson', label: '销售人员' }\r\n        ]\r\n      } else if (userRole.value === 'pharmacy_admin') {\r\n        return [\r\n          { value: 'salesperson', label: '销售人员' }\r\n        ]\r\n      }\r\n      return []\r\n    })\r\n\r\n    const getRoleType = (role) => {\r\n      const types = {\r\n        admin: 'danger',\r\n        pharmacy_admin: 'warning',\r\n        salesperson: 'success'\r\n      }\r\n      return types[role] || 'info'\r\n    }\r\n\r\n    const getRoleName = (role) => {\r\n      const names = {\r\n        admin: '系统管理员',\r\n        pharmacy_admin: '药店管理员',\r\n        salesperson: '销售人员'\r\n      }\r\n      return names[role] || role\r\n    }\r\n\r\n    const canDeleteUser = (user) => {\r\n      if (userRole.value === 'admin') {\r\n        return true\r\n      }\r\n      if (userRole.value === 'pharmacy_admin') {\r\n        return user.role === 'salesperson'\r\n      }\r\n      return false\r\n    }\r\n\r\n    const fetchUsers = async () => {\r\n      try {\r\n        loading.value = true\r\n        await store.dispatch('users/fetchUsers')\r\n      } catch (error) {\r\n        ElMessage.error(error.message)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const showAddDialog = () => {\r\n      userForm.value = {\r\n        username: '',\r\n        password: '',\r\n        role: ''\r\n      }\r\n      dialogVisible.value = true\r\n    }\r\n\r\n    const handleDelete = async (row) => {\r\n      try {\r\n        await ElMessageBox.confirm('确定要删除这个用户吗？', '警告', {\r\n          type: 'warning'\r\n        })\r\n        await axios.delete(`http://localhost:5000/api/users/${row.id}`)\r\n        ElMessage.success('删除成功')\r\n        fetchUsers()\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error(error.response?.data?.message || '删除失败')\r\n        }\r\n      }\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n      try {\r\n        await axios.post('http://localhost:5000/api/users', userForm.value)\r\n        ElMessage.success('添加成功')\r\n        dialogVisible.value = false\r\n        fetchUsers()\r\n      } catch (error) {\r\n        ElMessage.error(error.response?.data?.message || '操作失败')\r\n      }\r\n    }\r\n\r\n    onMounted(() => {\r\n      fetchUsers()\r\n    })\r\n\r\n    return {\r\n      loading,\r\n      users,\r\n      dialogVisible,\r\n      userForm,\r\n      rules,\r\n      canAddUser,\r\n      canEditUser,\r\n      availableRoles,\r\n      getRoleType,\r\n      getRoleName,\r\n      canDeleteUser,\r\n      showAddDialog,\r\n      handleDelete,\r\n      handleSubmit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.users-container {\r\n  padding: 20px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAQ;;EAmETA,KAAK,EAAC;AAAe;;;;;;;;;;;;;uBApEjCC,mBAAA,CA4EM,OA5ENC,UA4EM,GA3EJC,mBAAA,CAKM,OALNC,UAKM,G,0BAJJD,mBAAA,CAAa,YAAT,MAAI,sBAC+CE,MAAA,CAAAC,UAAU,I,cAAjEC,YAAA,CAEYC,oBAAA;;IAFDC,IAAI,EAAC,SAAS;IAAEC,OAAK,EAAEL,MAAA,CAAAM;;sBAAiC,MAEnEC,MAAA,QAAAA,MAAA,O,iBAFmE,QAEnE,E;;;wGAGFL,YAAA,CA6BWM,mBAAA;IA3BRC,IAAI,EAAET,MAAA,CAAAU,KAAK;IACZC,KAAmB,EAAnB;MAAA;IAAA;;sBACA,MAAmD,CAAnDC,YAAA,CAAmDC,0BAAA;MAAlCC,IAAI,EAAC,IAAI;MAACC,KAAK,EAAC,IAAI;MAACC,KAAK,EAAC;QAC5CJ,YAAA,CAA+CC,0BAAA;MAA9BC,IAAI,EAAC,UAAU;MAACC,KAAK,EAAC;QACvCH,YAAA,CAMkBC,0BAAA;MANDC,IAAI,EAAC,MAAM;MAACC,KAAK,EAAC;;MACtBE,OAAO,EAAAC,QAAA,CAAEC,KAAK,KACvBP,YAAA,CAESQ,iBAAA;QAFAhB,IAAI,EAAEJ,MAAA,CAAAqB,WAAW,CAACF,KAAK,CAACG,GAAG,CAACC,IAAI;;0BACvC,MAAiC,C,kCAA9BvB,MAAA,CAAAwB,WAAW,CAACL,KAAK,CAACG,GAAG,CAACC,IAAI,kB;;;;QAInCX,YAAA,CAIkBC,0BAAA;MAJDC,IAAI,EAAC,YAAY;MAACC,KAAK,EAAC;;MAC5BE,OAAO,EAAAC,QAAA,CAAEC,KAAK,K,sCAChBM,IAAI,CAACN,KAAK,CAACG,GAAG,CAACI,UAAU,EAAEC,cAAc,mB;;QAGlB3B,MAAA,CAAA4B,WAAW,I,cAA7C1B,YAAA,CAUkBW,0BAAA;;MAVDE,KAAK,EAAC;;MACVE,OAAO,EAAAC,QAAA,CAAEC,KAAK,KAKfnB,MAAA,CAAA6B,aAAa,CAACV,KAAK,CAACG,GAAG,K,cAJ/BpB,YAAA,CAMYC,oBAAA;;QALV2B,IAAI,EAAC,OAAO;QACZ1B,IAAI,EAAC,QAAQ;QACZC,OAAK,EAAA0B,MAAA,IAAE/B,MAAA,CAAAgC,YAAY,CAACb,KAAK,CAACG,GAAG;;0BACE,MAElCf,MAAA,QAAAA,MAAA,O,iBAFkC,MAElC,E;;;;;;;sDAzBOP,MAAA,CAAAiC,OAAO,E,GA8BpBC,mBAAA,aAAgB,EAChBtB,YAAA,CAmCYuB,oBAAA;IAlCVC,KAAK,EAAC,MAAM;gBACHpC,MAAA,CAAAqC,aAAa;+DAAbrC,MAAA,CAAAqC,aAAa,GAAAN,MAAA;IACtBf,KAAK,EAAC;;IAwBKsB,MAAM,EAAApB,QAAA,CACf,MAKO,CALPpB,mBAAA,CAKO,QALPyC,UAKO,GAJL3B,YAAA,CAAwDT,oBAAA;MAA5CE,OAAK,EAAAE,MAAA,QAAAA,MAAA,MAAAwB,MAAA,IAAE/B,MAAA,CAAAqC,aAAa;;wBAAU,MAAE9B,MAAA,QAAAA,MAAA,O,iBAAF,IAAE,E;;;QAC5CK,YAAA,CAEYT,oBAAA;MAFDC,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAEL,MAAA,CAAAwC;;wBAAc,MAEhDjC,MAAA,QAAAA,MAAA,O,iBAFgD,MAEhD,E;;;;sBA5BJ,MAsBU,CAtBVK,YAAA,CAsBU6B,kBAAA;MArBPC,KAAK,EAAE1C,MAAA,CAAA2C,QAAQ;MACfC,KAAK,EAAE5C,MAAA,CAAA4C,KAAK;MACbC,GAAG,EAAC,UAAU;MACd,aAAW,EAAC;;wBACZ,MAEe,CAFfjC,YAAA,CAEekC,uBAAA;QAFD/B,KAAK,EAAC,KAAK;QAACD,IAAI,EAAC;;0BAC7B,MAAwC,CAAxCF,YAAA,CAAwCmC,mBAAA;sBAArB/C,MAAA,CAAA2C,QAAQ,CAACK,QAAQ;qEAAjBhD,MAAA,CAAA2C,QAAQ,CAACK,QAAQ,GAAAjB,MAAA;;;UAEtCnB,YAAA,CAIekC,uBAAA;QAJD/B,KAAK,EAAC,IAAI;QAACD,IAAI,EAAC;;0BAC5B,MAEgC,CAFhCF,YAAA,CAEgCmC,mBAAA;UAD9B3C,IAAI,EAAC,UAAU;sBACNJ,MAAA,CAAA2C,QAAQ,CAACM,QAAQ;qEAAjBjD,MAAA,CAAA2C,QAAQ,CAACM,QAAQ,GAAAlB,MAAA;;;UAE9BnB,YAAA,CAQekC,uBAAA;QARD/B,KAAK,EAAC,IAAI;QAACD,IAAI,EAAC;;0BAC5B,MAMY,CANZF,YAAA,CAMYsC,oBAAA;sBANQlD,MAAA,CAAA2C,QAAQ,CAACpB,IAAI;qEAAbvB,MAAA,CAAA2C,QAAQ,CAACpB,IAAI,GAAAQ,MAAA;UAAEoB,WAAW,EAAC;;4BAE3C,MAA8B,E,kBADhCvD,mBAAA,CAIwBwD,SAAA,QAAAC,WAAA,CAHPrD,MAAA,CAAAsD,cAAc,EAAtB/B,IAAI;iCADbrB,YAAA,CAIwBqD,oBAAA;cAFrBC,GAAG,EAAEjC,IAAI,CAACkC,KAAK;cACf1C,KAAK,EAAEQ,IAAI,CAACR,KAAK;cACjB0C,KAAK,EAAElC,IAAI,CAACkC","ignoreList":[]}]}